---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Button from '@/components/common/Button.astro';
import SectionHeader from '@/components/common/SectionHeader.astro';
import Badge from '@/components/common/Badge.astro';
import { Layers, Server, Shield, Code, GitBranch, Cpu, Plug, ArrowRight } from 'lucide-react';
import {
  CONDUIT_META,
  CONDUIT_FEATURES,
  CONDUIT_CMS,
  CONDUIT_STEPS,
  CONDUIT_SPECS,
} from '@/lib/constants/conduit';

const iconMap: Record<string, any> = {
  layers: Layers,
  server: Server,
  shield: Shield,
  code: Code,
  'git-branch': GitBranch,
  cpu: Cpu,
};
---

<BaseLayout title={CONDUIT_META.title} description={CONDUIT_META.description}>
  <!-- Hero Section -->
  <header class="pt-40 pb-20 border-b-5 border-black bg-black text-white">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl">
        <div class="flex flex-wrap items-center gap-3 mb-6">
          <div class="inline-block bg-tf-orange text-black px-4 py-2 font-mono font-bold text-sm uppercase tracking-wider border-2 border-white">
            {CONDUIT_META.category}
          </div>
          <span class="bg-white text-black px-3 py-1 font-mono font-bold text-xs uppercase border-2 border-white">
            {CONDUIT_META.status}
          </span>
        </div>
        <h1 class="text-5xl sm:text-7xl md:text-8xl font-black uppercase leading-[0.9] tracking-tighter mb-8">
          {CONDUIT_META.title}
        </h1>
        <p class="text-2xl md:text-3xl font-mono font-bold text-tf-orange mb-6 uppercase">
          {CONDUIT_META.tagline}
        </p>
        <p class="text-xl font-mono text-gray-300 max-w-3xl mb-10">
          {CONDUIT_META.description}
        </p>

        <div class="flex flex-wrap gap-3 mb-10">
          <Badge variant="orange">MCP-NATIVE</Badge>
          <Badge variant="orange">UNIFIED API</Badge>
          <Badge variant="orange">ENTERPRISE GOVERNANCE</Badge>
        </div>

        <div class="flex flex-col sm:flex-row gap-4">
          <Button href="/contact" class="text-xl px-10 py-5">
            REQUEST BETA ACCESS
          </Button>
          <Button href="#architecture" variant="outline-light" class="text-xl px-10 py-5">
            VIEW ARCHITECTURE
          </Button>
        </div>
      </div>
    </div>
  </header>

  <!-- Capabilities -->
  <section class="py-32 border-t-5 border-black bg-white" id="capabilities">
    <div class="container mx-auto px-4">
      <SectionHeader
        number="01"
        title="CAPABILITIES"
        subtitle="A unified CMS interface built for enterprise control."
      />

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0 border-5 border-black bg-white">
        {CONDUIT_FEATURES.map((feature, idx) => {
          const IconComponent = iconMap[feature.icon];
          return (
            <div class={`p-8 ${idx < CONDUIT_FEATURES.length - 1 ? 'border-b-5 md:border-b-0 md:border-r-5 border-black' : ''} ${idx % 3 === 2 ? 'md:border-r-0' : ''} ${idx >= CONDUIT_FEATURES.length - 3 ? 'md:border-b-0' : 'md:border-b-5'} hover:bg-gray-50 transition-colors`}>
              <div class="flex items-center gap-3 mb-4">
                <div class="bg-tf-orange p-2 border-2 border-black">
                  {IconComponent && <IconComponent size={24} className="text-black" />}
                </div>
              </div>
              <h3 class="text-xl font-black uppercase mb-3">{feature.title}</h3>
              <p class="font-mono text-sm text-gray-600">{feature.description}</p>
            </div>
          );
        })}
      </div>
    </div>
  </section>

  <!-- Supported CMS -->
  <section class="py-32 border-t-5 border-black bg-tf-orange" id="platforms">
    <div class="container mx-auto px-4">
      <div class="max-w-5xl">
        <div class="inline-block bg-black text-white px-4 py-2 font-mono font-bold mb-6 border-2 border-white uppercase tracking-wider">
          SUPPORTED CMS
        </div>
        <h2 class="text-4xl md:text-6xl font-black uppercase mb-8 text-black">
          One Contract. <br />Multiple Platforms.
        </h2>
        <div class="flex flex-wrap gap-3">
          {CONDUIT_CMS.map((platform) => (
            <span class="bg-white border-4 border-black px-4 py-2 font-mono font-bold uppercase text-sm">
              {platform}
            </span>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Architecture Flow -->
  <section class="py-32 border-t-5 border-black bg-black text-white" id="architecture">
    <div class="container mx-auto px-4">
      <div class="mb-16 border-b-2 border-white/30 pb-6">
        <div class="flex items-center gap-4 mb-4">
          <Plug size={28} className="text-tf-orange" />
          <span class="font-mono font-bold text-tf-orange uppercase">Unified Flow</span>
        </div>
        <h2 class="text-4xl md:text-7xl font-black tracking-tighter uppercase leading-[0.85]">
          CONNECT → NORMALIZE → GOVERN
        </h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {CONDUIT_STEPS.map((step, idx) => (
          <div class="relative border-2 border-white/20 p-8 bg-black">
            <div class="bg-tf-orange text-black w-12 h-12 flex items-center justify-center font-mono font-black text-xl mb-4">
              {String(idx + 1).padStart(2, '0')}
            </div>
            <h3 class="text-2xl font-black uppercase mb-3">{step.title}</h3>
            <p class="font-mono text-gray-300">{step.description}</p>
            {idx < CONDUIT_STEPS.length - 1 && (
              <ArrowRight className="hidden md:block absolute top-12 -right-6 text-tf-orange" size={24} />
            )}
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Technical Specs -->
  <section class="py-32 border-t-5 border-black bg-white">
    <div class="container mx-auto px-4">
      <SectionHeader
        number="02"
        title="TECHNICAL SPECS"
        subtitle="Protocol, governance, and extensibility details."
      />

      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 border-5 border-black p-8">
        {CONDUIT_SPECS.map((spec) => (
          <div class="border-l-4 border-tf-orange pl-4">
            <p class="font-mono text-xs text-gray-400 uppercase mb-1">{spec.label}</p>
            <p class="font-bold text-base">{spec.value}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-32 border-t-5 border-black bg-tf-orange">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-4xl md:text-6xl font-black uppercase mb-8">
        Ready to Unify?
      </h2>
      <p class="font-mono text-xl font-bold mb-10 max-w-2xl mx-auto">
        Request Conduit beta access and connect every CMS through one interface.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button href="/contact" variant="secondary" class="text-xl px-12 py-5">
          REQUEST BETA
        </Button>
        <Button href="/advisory" variant="outline" class="text-xl px-12 py-5">
          TALK TO ADVISORY
        </Button>
      </div>
    </div>
  </section>
</BaseLayout>
