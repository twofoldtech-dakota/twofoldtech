---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Button from '@/components/common/Button.astro';
import SectionHeader from '@/components/common/SectionHeader.astro';
import Badge from '@/components/common/Badge.astro';
import { Zap, Layers, Flag, Cpu, FileText, Eye, Terminal, ArrowRight } from 'lucide-react';
import {
  ALLOY_META,
  ALLOY_METRICS,
  ALLOY_PIPELINE,
  ALLOY_FEATURES,
  ALLOY_CLI_EXAMPLES,
  ALLOY_SPECS,
} from '@/lib/constants/alloy';

const iconMap: Record<string, any> = {
  zap: Zap,
  layers: Layers,
  flag: Flag,
  cpu: Cpu,
  'file-text': FileText,
  eye: Eye,
};
---

<BaseLayout title={ALLOY_META.title} description={ALLOY_META.description}>
  <!-- Hero Section -->
  <header class="pt-40 pb-20 border-b-5 border-black bg-black text-white">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl">
        <div class="inline-block bg-tf-orange text-black px-4 py-2 font-mono font-bold text-sm mb-6 uppercase tracking-wider border-2 border-white">
          {ALLOY_META.category}
        </div>
        <h1 class="text-5xl sm:text-7xl md:text-8xl font-black uppercase leading-[0.9] tracking-tighter mb-8">
          {ALLOY_META.title}
        </h1>
        <p class="text-2xl md:text-3xl font-mono font-bold text-tf-orange mb-6 uppercase">
          {ALLOY_META.tagline}
        </p>
        <p class="text-xl font-mono text-gray-300 max-w-3xl mb-10">
          {ALLOY_META.description}
        </p>

        <!-- CLI Demo -->
        <div class="bg-gray-900 border-4 border-tf-orange p-6 font-mono text-sm mb-10 max-w-2xl">
          <div class="flex items-center gap-2 text-gray-500 mb-4">
            <Terminal size={16} />
            <span>terminal</span>
          </div>
          <div class="space-y-2">
            <p class="text-gray-400">$ alloy migrate --source ./master --target ./output</p>
            <p class="text-tf-orange">[INFO] Parsing content tree...</p>
            <p class="text-tf-orange">[INFO] Found 1,247,832 items</p>
            <p class="text-green-400">[SUCCESS] Migration complete in 47m 23s</p>
            <p class="text-white animate-pulse">_</p>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4">
          <Button href="/contact" class="text-xl px-10 py-5">
            REQUEST ACCESS
          </Button>
          <Button href="#metrics" variant="outline-light" class="text-xl px-10 py-5">
            VIEW PERFORMANCE
          </Button>
        </div>
      </div>
    </div>
  </header>

  <!-- Performance Metrics -->
  <section id="metrics" class="py-32 border-t-5 border-black bg-tf-orange">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
        {ALLOY_METRICS.map((metric) => (
          <div class="text-center">
            <p class="text-6xl md:text-8xl font-black">{metric.value}</p>
            <p class="font-mono font-bold text-xl mt-2">{metric.label}</p>
            <p class="font-mono text-sm mt-1 opacity-80">{metric.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Migration Pipeline -->
  <section class="py-32 border-t-5 border-black bg-white">
    <div class="container mx-auto px-4">
      <SectionHeader
        number="01"
        title="MIGRATION PIPELINE"
        subtitle="A four-stage process engineered for reliability and speed."
      />

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-0 border-5 border-black">
        {ALLOY_PIPELINE.map((stage, idx) => (
          <div class={`p-8 ${idx < ALLOY_PIPELINE.length - 1 ? 'border-b-5 lg:border-b-0 lg:border-r-5 border-black' : ''} relative`}>
            <div class="absolute -top-4 left-4 bg-black text-white px-3 py-1 font-mono text-xs font-bold">
              STAGE_{String(idx + 1).padStart(2, '0')}
            </div>
            <h3 class="text-3xl font-black uppercase mb-4 mt-4 text-tf-orange">{stage.name}</h3>
            <p class="font-mono text-sm text-gray-600 mb-6">{stage.description}</p>
            <ul class="space-y-2">
              {stage.details.map((detail) => (
                <li class="flex items-start gap-2 font-mono text-xs">
                  <ArrowRight size={12} className="mt-1 flex-shrink-0 text-tf-orange" />
                  <span>{detail}</span>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="py-32 border-t-5 border-black bg-gray-100">
    <div class="container mx-auto px-4">
      <SectionHeader
        number="02"
        title="ENGINE FEATURES"
        subtitle="Built from the ground up for enterprise Sitecore migrations."
      />

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {ALLOY_FEATURES.map((feature) => {
          const IconComponent = iconMap[feature.icon];
          return (
            <div class="border-5 border-black p-8 bg-white shadow-neo hover:-translate-y-1 hover:shadow-[12px_12px_0px_#000] transition-all">
              <div class="flex items-center gap-3 mb-4">
                <div class="bg-black p-2">
                  {IconComponent && <IconComponent size={24} className="text-tf-orange" />}
                </div>
              </div>
              <h3 class="text-xl font-black uppercase mb-3">{feature.title}</h3>
              <p class="font-mono text-sm text-gray-600">{feature.description}</p>
            </div>
          );
        })}
      </div>
    </div>
  </section>

  <!-- CLI Examples -->
  <section class="py-32 border-t-5 border-black bg-black text-white">
    <div class="container mx-auto px-4">
      <div class="mb-16 border-b-2 border-white/30 pb-6">
        <h2 class="text-4xl md:text-7xl font-black tracking-tighter uppercase leading-[0.85]">
          CLI REFERENCE
        </h2>
        <p class="font-mono mt-6 text-xl text-gray-400 uppercase">
          Common commands for migration workflows.
        </p>
      </div>

      <div class="space-y-6">
        {ALLOY_CLI_EXAMPLES.map((example) => (
          <div class="border-2 border-gray-700 p-6">
            <div class="flex items-center gap-2 text-tf-orange mb-3">
              <Terminal size={16} />
              <span class="font-mono text-sm">{example.description}</span>
            </div>
            <code class="font-mono text-lg text-white">{example.command}</code>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Technical Specs -->
  <section class="py-32 border-t-5 border-black bg-white">
    <div class="container mx-auto px-4">
      <SectionHeader
        number="03"
        title="TECHNICAL SPECS"
        subtitle="System requirements and compatibility."
      />

      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 border-5 border-black p-8">
        {ALLOY_SPECS.map((spec) => (
          <div class="border-l-4 border-tf-orange pl-4">
            <p class="font-mono text-xs text-gray-400 uppercase mb-1">{spec.label}</p>
            <p class="font-bold text-base">{spec.value}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-32 border-t-5 border-black bg-tf-orange">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-4xl md:text-6xl font-black uppercase mb-8">
        Ready to Migrate?
      </h2>
      <p class="font-mono text-xl font-bold mb-10 max-w-2xl mx-auto">
        Schedule a demo to see ALLOY in action on your Sitecore environment.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button href="/contact" variant="secondary" class="text-xl px-12 py-5">
          SCHEDULE DEMO
        </Button>
        <Button href="/" variant="outline" class="text-xl px-12 py-5">
          BACK TO HOME
        </Button>
      </div>
    </div>
  </section>
</BaseLayout>
